<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>jquery-comments by Viima</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    
      ga('create', 'UA-41980270-4', 'auto');
      ga('send', 'pageview');

      // Create sidebar dynamically
      $(function() {
        $('h3').each(function(index, el) {
            el = $(el);
            var id = 'link-' + index;
            el.attr('id', id);
            var listEl = $('<a/>').html(el.html());  
            listEl.attr('href', '#' + id);
            $('.sidebar').append(listEl);

            if(el.next().is('table')) {
                var table = el.next();
                table.find('th').each(function(index, th) {
                    th = $(th);
                    var id2 = id + '-' + index;
                    th.attr('id', id2);

                    var listEl2 = $('<a/>').html(th.text()).addClass('level-2'); 
                    listEl2.attr('href', '#' + id2);
                    $('.sidebar').append(listEl2);
                });
            }
        });
      });

    </script>

    <style type="text/css">

        .sidebar {
            float: left;
            margin-right: 2rem;
        }

        .sidebar a{
            display: block;
            color: #23A6F0;
            color: inherit;
            font-size: .9em;
            margin-bottom: .5em;
        }

        .sidebar a.level-2{
            font-size: .8em;
            padding-left: 2rem;
        }

        .content {
            overflow: hidden;
        }

        .content table {
            font-size: .9em;
            text-align: left;
        }

        .content td {
            vertical-align: top;
        }

        .content code {
            color: #23A6F0;
            background: none;
        }

        .content code.string {
            font-style: italic;
            color: inherit;
        }

        label {
            font-size: .9em;
            color: #999;
        }

        label.example {
            display: block;
            margin-top: 1rem;
        }

    </style>

  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">jquery-comments</h1>
      <h2 class="project-tagline">The Javascript library of choice for implementing commenting in your web app</h2>
      <a href="https://github.com/Viima/jquery-comments" class="btn">View on GitHub</a>
      <a href="https://github.com/Viima/jquery-comments/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/Viima/jquery-comments/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">

        <div class="sidebar"></div>

        <div class="content">


                  <h1>
            <a id="jquery-comments" class="anchor" href="#jquery-comments" aria-hidden="true"><span class="octicon octicon-link"></span></a>jquery-comments</h1>

            <p>jquery-comments is a jQuery plugin for implementing an out-of-the-box commenting solution to any web application with an existing backend. It provides all the UI functionalities and ties them to callbacks that let you easily define what you want to do with the data. The library is highly customizable and very easy to integrate thanks to a wide variety of settings.</p>

            <p><img src="https://github.com/Viima/jquery-comments/blob/master/screenshot.png?raw=true" alt="Screenshot of jquery-comments" title="Screenshot of jquery-comments"></p>

            <h3>
            <a id="features" class="anchor" href="#features" aria-hidden="true"><span class="octicon octicon-link"></span></a>Features</h3>

            <ul>
				<li>Commenting</li>
				<li>Replying (nested comments)</li>
				<li>Editing comments</li>
				<li>Deleting comments</li>
				<li>Upvoting comments</li>
				<li>Uploading attachments</li>
                <li>Hashtags</li>
                <li>Pinging users</li>
				<li>Enabling/disabling functionalities</li>
				<li>Localization</li>
				<li>Time formatting</li>
				<li>Field mappings</li>
				<li>Callbacks</li>
				<li>Fully responsive and mobile compatible</li>
				<li>Miscellaneous settings</li>
            </ul>

            <h3>
            <a id="demo" class="anchor" href="#demo" aria-hidden="true"><span class="octicon octicon-link"></span></a>Demo</h3>

            <p><a href="http://viima.github.io/jquery-comments/demo/">http://viima.github.io/jquery-comments/demo/</a></p>

            <h3>
            <a id="quick-start" class="anchor" href="#quick-start" aria-hidden="true"><span class="octicon octicon-link"></span></a>Quick start</h3>

            <p><strong>1) Add the following to your HTML file</strong></p>

<pre><code>&lt;link rel="stylesheet" type="text/css" href="css/jquery-comments.css"&gt;
&lt;link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css"&gt;

&lt;script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.9.0/jquery.min.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="js/jquery-comments.js"&gt;&lt;/script&gt;
</code></pre>

            <p><strong>2) Initialize the library</strong></p>

<pre><code>$('#comments-container').comments({
    profilePictureURL: 'https://app.viima.com/static/media/user_profiles/user-icon.png',
    getComments: function(success, error) {
        var commentsArray = [{
            id: 1,
            created: '2015-10-01',
            content: 'Lorem ipsum dolort sit amet',
            fullname: 'Simon Powell',
            upvote_count: 2,
            user_has_upvoted: false
        }];
        success(commentsArray);
    }
});
</code></pre>

            <p>If you are not using Font Awesome for icons, you should replace the icons with custom images by overriding following options when initializing the library:</p>

<pre><code>spinnerIconURL: '',
noCommentsIconURL: '',
upvoteIconURL: '',      // Only if upvoting is enabled
replyIconURL: '',       // Only if replying is enabled
uploadIconURL: '',      // Only if attachments are enabled
attachmentIconURL: '',  // Only if attachments are enabled
fileIconURL: '',        // Only if attachments are enabled
</code></pre>



<h3>Configuration options</h3>

<table>

<tr><th colspan="2">Current user</th></tr>

<tr>
<td><code>profilePictureURL</code></td>
<td>
<p>
An <code>url</code> for profile picture of the current user. Not required if Font Awesome is used.
</p>
<label>DEFAULT</label>  
<code class="string">""</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    profilePictureURL: '/user_profiles/user-icon.png'
});
</pre>
</td>
</tr>
<tr>
<td><code>currentUserIsAdmin</code></td>
<td>
<p>
A <code>boolean</code> value determing whether the current user is administarator
</p>
<label>DEFAULT</label>  
<code class="boolean">false</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    currentUserIsAdmin: true
});
</pre>
</td>
</tr>


<tr><th colspan="2">Images</th></tr>
<tr>
<td><code>spinnerIconURL</code></td>
<td>
<p>
An <code>url</code> for spinner icon that is shown before comments have been fetched. Not required if Font Awesome is used.
</p>
<label>DEFAULT</label>  
<code class="string">""</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    spinnerIconURL: '/img/spinner.gif'
});
</pre>
</td>
</tr>


<tr>
<td><code>upvoteIconURL</code></td>
<td>
<p>
An <code>url</code> for upvote icon that is used as a button for upvoting. Not required if Font Awesome is used.
</p>
<label>DEFAULT</label>  
<code class="string">""</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    upvoteIconURL: '/img/upvote-icon.png'
});
</pre>
</td>
</tr>


<tr>
<td><code>replyIconURL</code></td>
<td>
<p>
An <code>url</code> for reply icon that is shown after the author of the comment if the comment is a reply. Not required if Font Awesome is used.
</p>
<label>DEFAULT</label>  
<code class="string">""</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    replyIconURL: '/img/reply-icon.png'
});
</pre>
</td>
</tr>

<tr>
<td><code>uploadIconURL</code></td>
<td>
<p>
An <code>url</code> for upload icon that is used as a button for uploading attachments. Not required if Font Awesome is used.
</p>
<label>DEFAULT</label>  
<code class="string">""</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    uploadIconURL: '/img/upload-icon.png'
});
</pre>
</td>
</tr>

<tr>
<td><code>attachmentIconURL</code></td>
<td>
<p>
An <code>url</code> for attachment icon that is used as a symbor for attachments. Not required if Font Awesome is used.
</p>
<label>DEFAULT</label>  
<code class="string">""</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    attachmentIconURL: '/img/attachment-icon.png'
});
</pre>
</td>
</tr>

<tr>
<td><code>fileIconURL</code></td>
<td>
<p>
An <code>url</code> for file icon that is used to indicate that a link is an attachment. Not required if Font Awesome is used.
</p>
<label>DEFAULT</label>  
<code class="string">""</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    fileIconURL: '/img/file-icon.png'
});
</pre>
</td>
</tr>

<tr>
<td><code>noCommentsIconURL</code></td>
<td>
<p>
An <code>url</code> for no-comments icon that is shown if there are no comments to show. Not required if Font Awesome is used.
</p>
<label>DEFAULT</label>  
<code class="string">""</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    noCommentsIconURL: '/img/no-comments-icon.png'
});
</pre>
</td>
</tr>


<tr><th colspan="2">Strings</th></tr>

<tr>
<td><code>textareaPlaceholderText</code></td>
<td>
<p>
A <code>string</code> that is displayed as a placeholder in commenting fields
</p>
<label>DEFAULT</label>  
<code class="string">"Add a comment"</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    textareaPlaceholderText: 'Leave a comment'
});
</pre>
</td>
</tr>


<tr>
<td><code>newestText</code></td>
<td>
<p>
A <code>string</code> that is displayed on sorting button for newest comments
</p>
<label>DEFAULT</label>  
<code class="string">"Newest"</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    newestText: 'New'
});
</pre>
</td>
</tr>


<tr>
<td><code>oldestText</code></td>
<td>
<p>
A <code>string</code> that is displayed on sorting button for oldest comments
</p>
<label>DEFAULT</label>  
<code class="string">"Oldest"</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    oldestText: 'Old'
});
</pre>
</td>
</tr>

<tr>
<td><code>popularText</code></td>
<td>
<p>
A <code>string</code> that is displayed on sorting button for most popular comments
</p>
<label>DEFAULT</label>  
<code class="string">"Popular"</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    popularText: 'Most popular'
});
</pre>
</td>
</tr>

<tr>
<td><code>attachmentsText</code></td>
<td>
<p>
A <code>string</code> that is displayed on sorting button for attachments
</p>
<label>DEFAULT</label>  
<code class="string">"Attachments"</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    attachmentsText: 'Show attachments'
});
</pre>
</td>
</tr>

<tr>
<td><code>sendText</code></td>
<td>
<p>
A <code>string</code> that is displayed on send button
</p>
<label>DEFAULT</label>  
<code class="string">"Send"</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    sendText: 'Comment'
});
</pre>
</td>
</tr>


<tr>
<td><code>replyText</code></td>
<td>
<p>
A <code>string</code> that is displayed on reply button
</p>
<label>DEFAULT</label>  
<code class="string">"Reply"</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    replyText: 'Answer'
});
</pre>
</td>
</tr>


<tr>
<td><code>editText</code></td>
<td>
<p>
A <code>string</code> that is displayed on edit button
</p>
<label>DEFAULT</label>  
<code class="string">"Edit"</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    editText: 'Modify'
});
</pre>
</td>
</tr>

<tr>
<td><code>editedText</code></td>
<td>
<p>
A <code>string</code> that is displayed on edited timestamp
</p>
<label>DEFAULT</label>  
<code class="string">"Edited"</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    editedText: 'Modified'
});
</pre>
</td>
</tr>


<tr>
<td><code>youText</code></td>
<td>
<p>
A <code>string</code> that is displayed as a name of the user for new comments by default
</p>
<label>DEFAULT</label>  
<code class="string">"You"</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    youText: 'Me'
});
</pre>
</td>
</tr>

<tr>
<td><code>saveText</code></td>
<td>
<p>
A <code>string</code> that is displayed on save button
</p>
<label>DEFAULT</label>  
<code class="string">"Save"</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    saveText: 'Update'
});
</pre>
</td>
</tr>


<tr>
<td><code>deleteText</code></td>
<td>
<p>
A <code>string</code> that is displayed on delete button
</p>
<label>DEFAULT</label>  
<code class="string">"Delete"</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    deleteText: 'Remove'
});
</pre>
</td>
</tr>

<tr>
<td><code>viewAllRepliesText</code></td>
<td>
<p>
A <code>string</code> that is displayed to show all replies when there are more replies than defined in <code>maxRepliesVisible</code> option. Variable <code>__replyCount__</code> is used as a placeholder for the reply count.
</p>
<label>DEFAULT</label>  
<code class="string">"View all __replyCount__ replies"</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    viewAllRepliesText: 'Show all replies (__replyCount__)'
});
</pre>
</td>
</tr>


<tr>
<td><code>hideRepliesText</code></td>
<td>
<p>
A <code>string</code> that is displayed to hide replies that weren't visible initially
</p>
<label>DEFAULT</label>  
<code class="string">"Hide replies"</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    hideRepliesText: 'Hide'
});
</pre>
</td>
</tr>


<tr>
<td><code>noCommentsText</code></td>
<td>
<p>
A <code>string</code> that is displayed if there are no comments to show
</p>
<label>DEFAULT</label>  
<code class="string">"No comments"</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    noCommentsText: 'There are no comments'
});
</pre>
</td>
</tr>


<tr>
<td><code>noAttachmentsText</code></td>
<td>
<p>
A <code>string</code> that is displayed if there are no attachments to show
</p>
<label>DEFAULT</label>  
<code class="string">"No attachments"</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    noAttachmentsText: 'There are no attachments'
});
</pre>
</td>
</tr>


<tr>
<td><code>attachmentDropText</code></td>
<td>
<p>
A <code>string</code> that is used to inform the user where the attachments can be dropped
</p>
<label>DEFAULT</label>  
<code class="string">"Drop files here"</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    attachmentDropText: 'Drop here'
});
</pre>
</td>
</tr>


<tr><th colspan="2">Colors</th></tr>

<td><code>highlightColor</code></td>
<td>
<p>
A <code>css</code> value for the highlight color that is used for example to highlight active sorting button and comments by admin
</p>
<label>DEFAULT</label>  
<code class="string">#337AB7</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    highlightColor: '#23A6F0'
});
</pre>
</td>
</tr>

<tr>
<td><code>deleteButtonColor</code></td>
<td>
<p>
A <code>css</code> value for the color of the delete button
</p>
<label>DEFAULT</label>  
<code class="string">#C9302C</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    deleteButtonColor: 'red'
});
</pre>
</td>
</tr>

<tr><th colspan="2">Functionalities</th></tr>


<tr>
<td><code>enableReplying</code></td>
<td>
<p>
A <code>boolean</code> value determing whether replying is enabled
</p>
<label>DEFAULT</label>  
<code>true</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    enableReplying: false
});
</pre>
</td>
</tr>


<tr>
<td><code>enableEditing</code></td>
<td>
<p>
A <code>boolean</code> value determing whether editing is enabled
</p>
<label>DEFAULT</label>  
<code>true</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    enableEditing: false
});
</pre>
</td>
</tr>


<tr>
<td><code>enableUpvoting</code></td>
<td>
<p>
A <code>boolean</code> value determing whether upvoting is enabled
</p>
<label>DEFAULT</label>  
<code>true</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    enableUpvoting: false
});
</pre>
</td>
</tr>


<tr>
<td><code>enableDeleting</code></td>
<td>
<p>
A <code>boolean</code> value determing whether deleting is enabled
</p>
<label>DEFAULT</label>  
<code>true</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    enableDeleting: false
});
</pre>
</td>
</tr>


<tr>
<td><code>enableDeletingCommentWithReplies</code></td>
<td>
<p>
A <code>boolean</code> value determing whether user is allowed to delete own comment that has replies (replies will be deleted as well)
</p>
<label>DEFAULT</label>  
<code>true</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    enableDeletingCommentWithReplies: false
});
</pre>
</td>
</tr>


<tr>
<td><code>enableAttachments</code></td>
<td>
<p>
A <code>boolean</code> value determing whether attachments are enabled
</p>
<label>DEFAULT</label>  
<code>false</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    enableAttachments: true
});
</pre>
</td>
</tr>


<tr>
<td><code>enableHashtags</code></td>
<td>
<p>
A <code>boolean</code> value determing whether hashtags are enabled. Enabling this functionality highlights the hashtags and the <code>hashtagClicked</code> callback function will be executed once the user has clicked a hashtag.
</p>
<label>DEFAULT</label>  
<code>false</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    enableHashtags: true
});
</pre>
</td>
</tr>


<tr>
<td><code>enablePinging</code></td>
<td>
<p>
A <code>boolean</code> value determing whether pinging users is enabled. Enabling this functionality highlights the pings and the <code>pingClicked</code> callback function will be executed once the user has clicked a ping.
<br>
<br>
<label>N.B.</label>
<br>
<ul>
<li>The feature is depended on a javascript library called <a href="https://github.com/yuku-t/jquery-textcomplete">jquery-textcomplete</a></li>
<li>You need to provide the list of users who can be pinged using the <code>getUsers</code> callback function</li>
<li>jquery-comments assumes that the pings are sent to the server in format <code>@&lt;user_id&gt;</code>, for example <code>@145</code></li>
<li>jquery-comments assumes that the pings are returned from the server in format <code>@&lt;user_fullname&gt;</code>, for example <code>@Bryan Connery</code> together with array of pinged user ids in same order they appear in the comment</li>
</ul>

<i>Switching the ping format is required in order to keep the link between the user model and the ping so that the ping won't get broken in case the user changes her name for example. On the other hand, we expect the server to return the ping in user friendly format so that the API will always return comments in a format that can be displayed without processing.</i>

</p>
<label>DEFAULT</label>  
<code>false</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    enablePinging: true
});
</pre>
</td>
</tr>


<tr>
<td><code>enableNavigation</code></td>
<td>
<p>
A <code>boolean</code> value determing whether navigation is enabled
</p>
<label>DEFAULT</label>  
<code>true</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    enableNavigation: false
});
</pre>
</td>
</tr>


<tr>
<td><code>postCommentOnEnter</code></td>
<td>
<p>
A <code>boolean</code> value determing whether comments will be posted by pressing enter
</p>
<label>DEFAULT</label>  
<code>false</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    postCommentOnEnter: true
});
</pre>
</td>
</tr>


<tr>
<td><code>forceResponsive</code></td>
<td>
<p>
A <code>boolean</code> value determing whether the main navigation elements are presented in a dropdown
</p>
<label>DEFAULT</label>  
<code>false</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    forceResponsive: true
});
</pre>
</td>
</tr>


<tr>
<td><code>readOnly</code></td>
<td>
<p>
A <code>boolean</code> value determing whether any actions are enabled
</p>
<label>DEFAULT</label>  
<code>false</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    readOnly: true
});
</pre>
</td>
</tr>


<tr><th colspan="2">Field mappings</th></tr>

<tr>
<td><code>fieldMappings</code></td>
<td>
<p>
A <code>dictionary</code> that is used to map the fields between jquery-comments and the server. The keys of the dictionary represent field names used within the jquery-comments whereas the values represent the field names from your API. In callback functions the data is remapped to match with your API so you can use the comment data as such.
</p>
<label>FIELDS</label>  
<pre class="prettyprint linemus">
id                      // Required
parent                  // Required if replying is enabled
created                 // Required
modified                // Required if editing is enabled
content                 // Either content or fileURL must be present
fileURL                 // Either content or fileURL must be present
file                    // Required when uploading an attachment
fileMimeType            // Optional
pings                   // Required if pinging is enabled
creator                 // Required if pinging is enabled
fullname                // Required
profileURL              // Optional
profilePictureURL       // Optional
isNew                   // Optional
createdByAdmin          // Optional
createdByCurrentUser    // Required if editing is enabled
upvoteCount             // Required if upvoting is enabled
userHasUpvoted          // Required if upvoting is enabled
</pre>
<label>DEFAULT</label>  
<pre class="prettyprint linemus">
fieldMappings: {
    id: 'id',
    parent: 'parent',
    created: 'created',
    modified: 'modified',
    content: 'content',
    file: 'file',
    fileURL: 'file_url',
    fileMimeType: 'file_mime_type',
    pings: 'pings',
    creator: 'creator',
    fullname: 'fullname',
    profileURL: 'profile_url',
    profilePictureURL: 'profile_picture_url',
    isNew: 'is_new',
    createdByAdmin: 'created_by_admin',
    createdByCurrentUser: 'created_by_current_user',
    upvoteCount: 'upvote_count',
    userHasUpvoted: 'user_has_upvoted'
}
</pre>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    fieldMappings: {
       parent: 'comment_id',
       modified: 'edited',
       fullname: 'name',
       profilePictureURL: 'user_image',
       upvoteCount: 'upvotes',
    }
});
</pre>
</td>
</tr>


<tr><th colspan="2">Callbacks</th></tr>


<tr>
<td><code>refresh</code></td>
<td>
<p>
A callback <code>function</code> that is called after the comments have been rendered
</p>
<label>DEFAULT</label>  
<pre class="prettyprint linemus">
function() {}
</pre>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    refresh: function() {
        $('#comments-container').addClass('rendered');
    }
});
</pre>
</td>
</tr>

<tr>
<td><code>getComments</code></td>
<td>
<p>
A callback <code>function</code> that is used to fetch the comments array from the server. The callback provides both <code>success</code> and <code>error</code> callbacks which should be called based on the result from the server. The success callback takes the comment array as a parameter.
</p>
<label>DEFAULT</label>  
<pre class="prettyprint linemus">
function(success, error) {
    success([]);
}
</pre>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    getComments: function(success, error) {
        $.ajax({
            type: 'get',
            url: '/api/comments/',
            success: function(commentsArray) {
                success(commentsArray)
            },
            error: error
        });
    }
});
</pre>
</td>
</tr>

<tr>
<td><code>getUsers</code></td>
<td>
<p>
A callback <code>function</code> that is used to fetch the user array from the server. The callback provides both <code>success</code> and <code>error</code> callbacks which should be called based on the result from the server. The success callback takes the user array as a parameter.
</p>
<label>DEFAULT</label>  
<pre class="prettyprint linemus">
function(success, error) {
    success([]);
}
</pre>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    getUsers: function(success, error) {
        $.ajax({
            type: 'get',
            url: '/api/users/',
            success: function(userArray) {
                success(userArray)
            },
            error: error
        });
    }
});
</pre>
</td>
</tr>


<tr>
<td><code>postComment</code></td>
<td>
<p>
A callback <code>function</code> that is used to create a new comment to the server. The first parameter of the callback is <code>commentJSON</code> that contains the data of the new comment. The callback provides both <code>success</code> and <code>error</code> callbacks which should be called based on the result from the server. The success callback takes the created comment as a parameter.
</p>
<label>DEFAULT</label>  
<pre class="prettyprint linemus">
function(commentJSON, success, error) {
    success(commentJSON);
}
</pre>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    postComment: function(commentJSON, success, error) {
        $.ajax({
            type: 'post',
            url: '/api/comments/',
            data: commentJSON,
            success: function(comment) {
                success(comment)
            },
            error: error
        });
    }
});
</pre>
</td>
</tr>


<tr>
<td><code>putComment</code></td>
<td>
<p>
A callback <code>function</code> that is used to update an existing comment to the server. The first parameter of the callback is <code>commentJSON</code> that contains the data of the updated comment. The callback provides both <code>success</code> and <code>error</code> callbacks which should be called based on the result from the server. The success callback takes the updated comment as a parameter.
</p>
<label>DEFAULT</label>  
<pre class="prettyprint linemus">
function(commentJSON, success, error) {
    success(commentJSON);
}
</pre>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    putComment: function(commentJSON, success, error) {
        $.ajax({
            type: 'put',
            url: '/api/comments/' + commentJSON.id,
            data: commentJSON,
            success: function(comment) {
                success(comment)
            },
            error: error
        });
    }
});
</pre>
</td>
</tr>


<tr>
<td><code>deleteComment</code></td>
<td>
<p>
A callback <code>function</code> that is used to delete a comment from the server. The first parameter of the callback is <code>commentJSON</code> that contains the data of the comment to be deleted. The callback provides both <code>success</code> and <code>error</code> callbacks which should be called based on the result from the server.
</p>
<label>DEFAULT</label>  
<pre class="prettyprint linemus">
function(commentJSON, success, error) {
    success();
}
</pre>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    deleteComment: function(commentJSON, success, error) {
        $.ajax({
            type: 'delete',
            url: '/api/comments/' + commentJSON.id,
            success: success,
            error: error
        });
    }
});
</pre>
</td>
</tr>


<tr>
<td><code>upvoteComment</code></td>
<td>
<p>
A callback <code>function</code> that is used to create or delete an upvote. The first parameter of the callback is <code>commentJSON</code> that contains the data of the upvoted comment. The callback provides both <code>success</code> and <code>error</code> callbacks which should be called based on the result from the server. The success callback takes the updated comment as a parameter.
</p>
<label>DEFAULT</label>  
<pre class="prettyprint linemus">
function(commentJSON, success, error) {
    success(commentJSON);
}
</pre>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    upvoteComment: function(commentJSON, success, error) {
        var commentURL = '/api/comments/' + commentJSON.id;
        var upvotesURL = commentURL + '/upvotes/';

        if(commentJSON.userHasUpvoted) {
            $.ajax({
                type: 'post',
                url: upvotesURL,
                data: {
                    comment: commentJSON.id
                },
                success: function() {
                    success(commentJSON)
                },
                error: error
            });
        } else {
            $.ajax({
                type: 'delete',
                url: upvotesURL + upvoteId,
                success: function() {
                    success(commentJSON)
                },
                error: error
            });
        }
    }
});
</pre>
</td>
</tr>


<tr>
<td><code>uploadAttachments</code></td>
<td>
<p>
A callback <code>function</code> that is used to upload attachments to the server. The first parameter of the callback is <code>commentArray</code> including all the attachments as comment models where <code>file</code> field contains the file to be uploaded. The server should return the url for the uploaded file in <code>fileURL</code> field. The callback provides both <code>success</code> and <code>error</code> callbacks which should be called based on the result from the server. The success callback takes an array of successfull uploads as a parameter.
</p>
<label>DEFAULT</label>  
<pre class="prettyprint linemus">
function(commentArray, success, error) {
    success(commentArray);
}
</pre>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    uploadAttachments: function(commentArray, success, error) {
        var responses = 0;
        var successfulUploads = [];

        var serverResponded = function() {
            responses++;

            // Check if all requests have finished
            if(responses == commentArray.length) {
                
                // Case: all failed
                if(successfulUploads.length == 0) {
                    error();

                // Case: some succeeded
                } else {
                    success(successfulUploads)
                }
            }
        }

        $(commentArray).each(function(index, commentJSON) {

            // Create form data
            var formData = new FormData();
            $(Object.keys(commentJSON)).each(function(index, key) {
                var value = commentJSON[key];
                if(value) formData.append(key, value);
            });

            $.ajax({
                url: '/api/comments/',
                type: 'POST',
                data: formData,
                cache: false,
                contentType: false,
                processData: false,
                success: function(commentJSON) {
                    successfulUploads.push(commentJSON);
                    serverResponded();
                },
                error: function(data) {
                    serverResponded();
                },
            });
        });
    }
});
</pre>
</td>
</tr>


<tr>
<td><code>hashtagClicked</code></td>
<td>
<p>
A callback <code>function</code> that is called after user has clicked a hashtag
</p>
<label>DEFAULT</label>  
<pre class="prettyprint linemus">
function(hashtag) {}
</pre>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    hashtagClicked: function(hashtag) {
        location.hash = 'tags/' + hashtag
    }
});
</pre>
</td>
</tr>


<tr>
<td><code>pingClicked</code></td>
<td>
<p>
A callback <code>function</code> that is called after user has clicked a ping
</p>
<label>DEFAULT</label>  
<pre class="prettyprint linemus">
function(ping) {}
</pre>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    pingClicked: function(ping) {
        location.hash = 'users/' + ping
    }
});
</pre>
</td>
</tr>


<tr><th colspan="2">Formatters</th></tr>

<tr>
<td><code>textFormatter</code></td>
<td>
<p>
A callback <code>function</code> that is called for strings before inserting to DOM. Can be used for localization for instance.
</p>
<label>DEFAULT</label>  
<pre class="prettyprint linemus">
function(text) {
    return text;
}
</pre>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    textFormatter: function(text) {
        return i18n.translate(text);
    }
});
</pre>
</td>
</tr>

<tr>
<td><code>timeFormatter</code></td>
<td>
<p>
A callback <code>function</code> that is called for timestamps before inserting to DOM. Can be used for relative times for instance.
</p>
<label>DEFAULT</label>  
<pre class="prettyprint linemus">
function(time) {
    return new Date(time).toLocaleDateString();
}
</pre>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    timeFormatter: function(time) {
        return moment(time).fromNow();
    }
});
</pre>
</td>
</tr>

<tr><th colspan="2">Miscellaneous</th></tr>


<tr>
<td><code>defaultNavigationSortKey</code></td>
<td>
<p>
A <code>string</code> value determing the default sorting. Possible values are <code>newest</code>, <code>oldest</code>, <code>popularity</code> and <code>attachments</code>
</p>
<label>DEFAULT</label>  
<code class="string">"newest"</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    defaultNavigationSortKey: 'popularity'
});
</pre>
</td>
</tr>


<tr>
<td><code>roundProfilePictures</code></td>
<td>
<p>
A <code>boolean</code> value determing whether profile pictures are rounded
</p>
<label>DEFAULT</label>  
<code>false</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    roundProfilePictures: true
});
</pre>
</td>
</tr>


<tr>
<td><code>textareaRows</code></td>
<td>
<p>
An <code>integer</code> value determing how many rows there are in the commenting fields
</p>
<label>DEFAULT</label>  
<code>2</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    textareaRows: 1
});
</pre>
</td>
</tr>

<tr>
<td><code>textareaRowsOnFocus</code></td>
<td>
<p>
An <code>integer</code> value determing how many rows there are in the commenting fields on focus
</p>
<label>DEFAULT</label>  
<code>2</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    textareaRowsOnFocus: 4
});
</pre>
</td>
</tr>


<tr>
<td><code>textareaMaxRows</code></td>
<td>
<p>
An <code>integer</code> or a <code>boolean</code> value determing the maximum amount of rows in commenting fields as they increase when typing. If set to <code>false</code>, commenting fields will increase infinitely.
</p>
<label>DEFAULT</label>  
<code>5</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    textareaMaxRows: false
});
</pre>
</td>
</tr>


<tr>
<td><code>maxRepliesVisible</code></td>
<td>
<p>
An <code>integer</code> value determing the maximum amount of replies that are visibile intially under a comment. The hidden replies can be shown by clicking the button with a text set in <code>viewAllRepliesText</code> option.
</p>
<label>DEFAULT</label>  
<code>2</code>
<label class="example">EXAMPLE</label>  
<pre class="prettyprint linemus">
$('#comments-container').comments({
    maxRepliesVisible: 3
});
</pre>
</td>
</tr>

</table>
	    <h3>
            <a id="backend" class="anchor" href="#backend" aria-hidden="true"><span class="octicon octicon-link"></span></a>Backend/API implementation</h3>
	    <p>This project doesn't take any stance on how you implement your backend and APIs for providing the library with the information it needs. However, as there have been many requests for it, you can find the documentation of the comment related endpoints for our REST API below as a reference.</p>
	    <p><img src="https://github.com/Viima/jquery-comments/blob/master/comment-api-example.png?raw=true" alt="Comments REST API documentation" title="Comments REST API documentation"></p>
	
            <h3>
            <a id="dependencies" class="anchor" href="#dependencies" aria-hidden="true"><span class="octicon octicon-link"></span></a>Dependencies</h3>

            <ul>
            <li><a href="https://github.com/jquery/jquery">jQuery</a> &gt;= 1.9.0</li>
            <li><a href="https://github.com/FortAwesome/Font-Awesome">Font Awesome</a> (optional)</li>
            <li><a href="https://github.com/yuku-t/jquery-textcomplete">jquery-textcomplete</a> (optional)</li>
            </ul>

            <h3>
            <a id="maintainers" class="anchor" href="#maintainers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Maintainers</h3>

            <ul>
            <li>
            <a href="https://www.linkedin.com/in/joonatykkylainen">Joona Tykkyl√§inen</a>, Viima Solutions Oy</li>
            </ul>

            <h3>
            <a id="browser-support" class="anchor" href="#browser-support" aria-hidden="true"><span class="octicon octicon-link"></span></a>Browser support</h3>

            <p>IE9+ and all modern browsers</p>

            <h3>
            <a id="copyright-and-license" class="anchor" href="#copyright-and-license" aria-hidden="true"><span class="octicon octicon-link"></span></a>Copyright and license</h3>

            <p>Code and documentation copyright 2017 <a href="https://www.viima.com/">Viima Solutions Oy</a>. Code released under <a href="https://github.com/Viima/jquery-comments/blob/master/LICENSE">the MIT license</a>.</p>

                  <footer class="site-footer">
                    <span class="site-footer-owner"><a href="https://github.com/Viima/jquery-comments">jquery-comments</a> is maintained by <a href="https://github.com/Viima">Viima</a>.</span>
                  </footer>


        </div>

    </section>
  </body>
</html>

